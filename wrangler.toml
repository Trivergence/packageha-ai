name = "packageha-ai"
main = "src/index.ts"
compatibility_date = "2024-12-16"

[observability]
[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true

[vars]
# The Hybrid Sovereign Switch Configuration
# Options: "COMMERCIAL" | "SOVEREIGN" | "AIR_GAPPED"
SOVEREIGN_MODE = "COMMERCIAL" # Mode A: Cloudflare AI (US)

# Mode B (SOVEREIGN) - Uncomment and configure for Vertex AI (Dammam Region)
# SOVEREIGN_MODE = "SOVEREIGN"
# VERTEX_AI_ENDPOINT = "https://aiplatform.googleapis.com/v1"
# VERTEX_AI_PROJECT = "your-gcp-project-id"
# VERTEX_AI_LOCATION = "asia-southeast1" # Dammam region

# Mode C (AIR_GAPPED) - Uncomment for local Llama server
# SOVEREIGN_MODE = "AIR_GAPPED"
# LOCAL_LLAMA_ENDPOINT = "http://localhost:8080/v1/chat/completions"



# 1. NEW: Enable Cloudflare AI
[ai]
binding = "AI"

[durable_objects]
bindings = [
  { name = "PackagehaSession", class_name = "PackagehaSession" }
]

[[migrations]]
tag = "v1"
new_sqlite_classes = ["PackagehaSession"]